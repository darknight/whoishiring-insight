---
import Layout from '../layouts/Layout.astro';
import TimeRangeFilter from '../components/TimeRangeFilter.svelte';
import CategoryTrendChart from '../components/charts/CategoryTrendChart.svelte';
import RemoteTrendChart from '../components/charts/RemoteTrendChart.svelte';
import OverseasTrendChart from '../components/charts/OverseasTrendChart.svelte';
import ExperienceTrendChart from '../components/charts/ExperienceTrendChart.svelte';
import trendStats from '../data/trend-stats.json';
---

<Layout title="趋势分析 - 谁在招人">
  <div class="mx-auto max-w-7xl px-4 py-12 sm:px-6">
    <div class="mb-8">
      <h1 class="text-3xl font-bold tracking-tight text-(--color-text-primary)">趋势分析</h1>
      <p class="mt-2 text-(--color-text-secondary)">招聘数量与岗位特征随时间的变化趋势</p>
    </div>

    <div class="mb-6">
      <TimeRangeFilter client:load onchange={(range: { start: string; end: string } | null) => {
        document.dispatchEvent(new CustomEvent('timerange-change', { detail: range }));
      }} />
    </div>

    <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
      <CategoryTrendChart client:load data={trendStats.categoryTrend} />
      <RemoteTrendChart client:load data={trendStats.remoteTrend} />
      <OverseasTrendChart client:load data={trendStats.overseasTrend} />
      <ExperienceTrendChart client:load data={trendStats.experienceTrend} />
    </div>
  </div>
</Layout>
